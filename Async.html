<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function fn() {
        return new Promise((resolve) => {
          resolve(10);
        });
      }
      // fn().then(console.log);
      console.log("这是调用后打印");
      /*
      在js中可以通过async关键字来快速创建异步函数
        特点：
          1.async声明的异步函数，它的返回值会自动包装为Promise
          2.async声明的异步函数中可以使用await来调用其他异步函数

        await
          -调用异步函数时，可以直接在函数前使用await关键字来进行调用
            -调用await，它会等待Pomise执行出结果后将结果返回，可以通过变量接受结果
            注意：await并不是将异步函数改为同步函数，只是改变了调用方式
              -所以await不是说在哪都能用
              -当使用了await，catch方法不能调用，只能通过try-catch来处理异常
          -await使用的位置
            1.async声明的异步函数中
            2.可以在模块的外层作用域中使用await
    */
      async function fn2() {
        return 10;
      }
      async function fn3(n) {
        return n + 10;
      }
      //  let result = fn2();
      //  console.log(result);
      // fn2().then(fn3).then(console.log)

      async function fn4() {
        try {
          let result = await fn2();
          result = await fn3(result);
          console.log(result);
        } catch (error) {
          console.log(error);
        }
      }
      fn4();
      console.log("这是调用后的打印");
      (async () => {
        try {
          let result = await fn2();
          result = await fn3(result);
          console.log(result);
        } catch (error) {
          console.log(error);
        }
      })();
      async function fn5(){
        console.log('123');
      }
      fn5();
    </script>
  </body>
</html>
